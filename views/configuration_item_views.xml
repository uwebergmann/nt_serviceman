<?xml version="1.0" encoding="utf-8"?>
<!--
    © NETHINKS GmbH – Alle Rechte vorbehalten
    Beschreibung: Views für Configuration Items (CI)
    Letzte Änderung: $LastChanged$
    Commit: $CommitId$
    Autor: $Author$
-->
<odoo>
    <record id="view_configuration_item_tree" model="ir.ui.view">
        <field name="name">nt_serviceman.configuration_item.tree</field>
        <field name="model">nt_serviceman.configuration_item</field>
        <field name="arch" type="xml">
            <tree string="Configuration Items">
                <field name="name"/>
                <field name="netbox_id"/>
                <field name="netbox_display"/>
                <field name="netbox_serial"/>
                <field name="netbox_device_type"/>
                <field name="netbox_role_id"/>
                <field name="netbox_role_netbox_id"/>
            </tree>
        </field>
    </record>

    <record id="view_configuration_item_form" model="ir.ui.view">
        <field name="name">nt_serviceman.configuration_item.form</field>
        <field name="model">nt_serviceman.configuration_item</field>
        <field name="arch" type="xml">
            <form string="Configuration Item">
                <sheet>
                    <div class="oe_title">
                        <h1><field name="name" placeholder="Wird aus NetBox übernommen"/></h1>
                    </div>
                    <group col="1" string="">
                        <div class="my-3">
                            <button name="action_fetch_from_netbox" type="object"
                                    string="Hole NetBox-Item" class="btn btn-primary"/>
                        </div>
                    </group>
                    <group col="2" class="mt16">
                        <group string="">
                            <field name="netbox_id"/>
                            <field name="ci_class_id"/>
                        </group>
                        <group string="NetBox-Daten">
                            <field name="netbox_display_link" string="NetBox-Link"/>
                            <field name="netbox_serial"/>
                            <field name="netbox_device_type"/>
                            <field name="netbox_role_id" string="Rolle im DCIM"/>
                            <field name="netbox_role_netbox_id" attrs="{'invisible': [('netbox_role_id', '=', False)]}"/>
                            <field name="netbox_tenant_name"/>
                            <field name="netbox_created"/>
                            <field name="netbox_last_updated"/>
                            <field name="netbox_last_sync"/>
                            <field name="netbox_sync_state"/>
                            <field name="netbox_sync_error" attrs="{'invisible': [('netbox_sync_state', '!=', 'failed')]}"/>
                        </group>
                    </group>
                    <group string="Debug (Roh-JSON)" class="mt16">
                        <field name="netbox_raw_response" nolabel="1"
                               placeholder="Rohes JSON-Ergebnis erscheint hier nach Klick auf 'Hole NetBox-Item'."/>
                    </group>
                </sheet>
            </form>
        </field>
    </record>

    <record id="action_configuration_item" model="ir.actions.act_window">
        <field name="name">CI-Einträge</field>
        <field name="res_model">nt_serviceman.configuration_item</field>
        <field name="view_mode">tree,form</field>
    </record>

    <menuitem id="menu_configuration_item"
              name="CI-Einträge"
              parent="menu_nt_serviceman_root"
              action="action_configuration_item"
              sequence="12"
              groups="nt_serviceman.group_nt_serviceman_admin,nt_serviceman.group_nt_serviceman_user"/>
</odoo>
